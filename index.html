<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>HAND MADE WEBSITES â€” Matrix (THE BOX fills first row width)</title>

<style>
  :root{
    --gap: clamp(8px, 1.6vmin, 20px);
    --border: clamp(3px, 0.6vmin, 10px);
    --wrap-padding: 12px;
    --txt-dark: #000;
    --txt-light: #fff;

    /* runtime-updated by JS */
    --grid-width: 100vw;
    --tile-size: 120px;    /* width/height of each small tile in px */
    --primary-height-ratio: 0.5; /* primary height = primary width * ratio (height is half of width) */
  }

  html,body{
    height:100%;
    margin:0;
    background:#000;
    font-family: Arial, Helvetica, sans-serif;
    color:var(--txt-light);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  .wrap{
    width:100%;
    padding: var(--wrap-padding);
    box-sizing:border-box;
    display:flex;
    justify-content:center;
  }

  .content {
    width: 100%;
    box-sizing: border-box;
    max-width: none;
    display:flex;
    flex-direction:column;
    align-items:center;
  }

  /* THE BOX: keeps the full width used by the small-grid below,
     but its height is half its width (controlled by CSS variable for flexibility). */
  .primary {
    width: calc(var(--grid-width));
    height: calc(var(--grid-width) * var(--primary-height-ratio));
    display:flex;
    align-items:center;
    justify-content:center;
    background: orange;
    color:var(--txt-dark);
    border: calc(var(--border) / 1.2) solid #000;
    border-radius: 6px;
    box-sizing: border-box;
    overflow: hidden;
    padding: 8px;
    margin-bottom: var(--gap);
    background-clip: padding-box;
  }

  .primary.colorme_main { animation: bgcolorchange 10s linear infinite; }
  @keyframes bgcolorchange {
    0% { background: gold; } 10% { background: orange; } 20% { background:#ff6600; }
    30% { background: OrangeRed; } 40% { background: magenta; } 50% { background: HotPink; }
    60% { background: violet; } 70% { background: #ffcc00; } 80% { background: gold; } 100% { background: gold; }
  }

  .primary .title{
    margin:0;
    font-size: clamp(16px, calc(var(--grid-width) * 0.06), 140px);
    line-height:1;
    text-align:center;
    word-break:break-word;
  }

  /* small-grid: width is kept equal to --grid-width so THE BOX always fills the first row width */
  .small-grid {
    width: calc(var(--grid-width));
    display:grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--gap);
    box-sizing:border-box;
    grid-auto-rows: var(--tile-size); /* JS sets --tile-size to keep tiles square */
    margin-bottom: var(--gap);
  }

  /* tile/card */
  .card {
    display:flex;
    align-items:center;
    justify-content:center;
    text-decoration:none;
    color:var(--txt-dark);
    border: calc(var(--border)/1.2) solid #000;
    box-sizing:border-box;
    border-radius:6px;
    overflow:hidden;
    padding:6px;
    background-clip: padding-box;
    user-select:none;
  }
  .card .inner { width:100%; height:100%; display:flex; align-items:center; justify-content:center; text-align:center; padding:4px; }
  .promo { margin:0; font-weight:600; font-size: clamp(10px, calc(var(--tile-size) * 0.12), 22px); }

  /* colors */
  .c-green{ background: green; }
  .c-slate{ background: SlateBlue; color:var(--txt-light); }
  .c-red{ background: OrangeRed; color:var(--txt-light); }
  .c-aqua{ background: aqua; color:var(--txt-dark); }
  .c-orange{ background: orange; color:var(--txt-dark); }
  .c-blv{ background: BlueViolet; color:var(--txt-light); }
  .c-magenta{ background: magenta; color:var(--txt-dark); }
  .c-ff{ background:#ffcc00; color:var(--txt-dark); }
  .c-blue{ background: blue; color:var(--txt-light); }
  .c-violet{ background: violet; color:var(--txt-dark); }
  .c-lime{ background: lime; color:var(--txt-dark); }
  .c-gold{ background: gold; color:var(--txt-dark); }

  .card:hover, .card:focus { transform: translateY(-6px); box-shadow: 0 18px 36px rgba(0,0,0,0.45); z-index:2; transition:.15s; }
  .card:focus-visible { outline: 3px solid rgba(255,255,255,0.85); outline-offset:3px; }

  /* MOBILE: switch small-grid to 2 columns and ensure grid width fits viewport */
  @media (max-width:700px) {
    .small-grid {
      grid-template-columns: repeat(2, 1fr);
      /* width still controlled by JS via --grid-width so small-grid matches primary */
    }
    .primary { width: calc(var(--grid-width)); height: calc(var(--grid-width) * var(--primary-height-ratio)); }
  }

  /* reduce primary width on very short viewports if necessary */
  @media (max-height:420px) {
    .primary { height: calc(var(--grid-width) * var(--primary-height-ratio)); }
  }

  .homelink { text-align:center; margin:18px 0; }
  .homelink a { color:inherit; text-decoration:none; background:rgba(255,255,255,0.06); padding:8px 12px; border-radius:6px; display:inline-block; }
</style>
</head>
<body>
  <div class="wrap">
    <div class="content">
      <!-- THE BOX (width controlled by --grid-width, height is half that width) -->
      <a class="primary colorme_main" href="matrix_1.html" target="_blank" rel="noopener" aria-label="THE BOX">
        <div class="inner"><h1 class="title">THE<br>BOX</h1></div>
      </a>

      <!-- small grid: tiles flow into 4 columns (desktop) or 2 columns (mobile) -->
      <div class="small-grid" id="smallGrid">
        <a class="card c-green"  href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 1<br>GREEN</h2></div></a>
        <a class="card c-slate"  href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 2<br>SLATEBLUE</h2></div></a>

        <a class="card c-red"    href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 3<br>ORANGERED</h2></div></a>
        <a class="card c-aqua"   href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 4<br>AQUA</h2></div></a>

        <a class="card c-orange" href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 5<br>ORANGE</h2></div></a>
        <a class="card c-blv"    href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 6<br>BLUEVIOLET</h2></div></a>

        <a class="card c-magenta" href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 7<br>MAGENTA</h2></div></a>
        <a class="card c-ff"     href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 8<br>#FFCC00</h2></div></a>

        <a class="card c-blue"   href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 9<br>BLUE</h2></div></a>
        <a class="card c-violet" href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 10<br>VIOLET</h2></div></a>

        <a class="card c-lime"   href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 11<br>LIME</h2></div></a>
        <a class="card c-gold"   href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 12<br>GOLD</h2></div></a>
      </div>
    </div>
  </div>

  <div class="homelink"><a href="1_template_gallery.html" target="_blank" rel="noopener">BACK HOME</a></div>

<script>
/*
  JS measures an ideal grid width and tile size and writes them to CSS vars:
  - --grid-width: the width that both THE BOX and the small-grid will use (in px)
  - --tile-size: (gridWidth - gaps) / columns -> used as grid-auto-rows so small tiles are squares
  Behavior:
  - On wide screens the grid width is based on viewport width (leaving wrap padding).
  - On mobile the grid width is similar but columns drop to 2; JS detects that with matchMedia.
  This guarantees THE BOX always fills the first-row width (same width as the small-grid),
  and the small-grid tiles remain perfect squares and expand as the screen grows.
*/
(function () {
  const primary = document.querySelector('.primary');
  const grid = document.getElementById('smallGrid');
  if (!primary || !grid) return;

  let raf = null;
  const wrapPadding = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--wrap-padding')) || 12;

  function update() {
    // Decide columns (2 on mobile narrow, 4 otherwise)
    const cols = window.matchMedia('(max-width:700px)').matches ? 2 : 4;

    // Compute available width: viewport width minus outer wrap padding
    const vw = Math.max(document.documentElement.clientWidth || window.innerWidth, 320);
    const available = vw - (wrapPadding * 2);

    // Use available width as grid width (so THE BOX fills the same width)
    const gridWidth = Math.floor(available);

    // compute gap px from grid
    const gapPx = parseFloat(getComputedStyle(grid).getPropertyValue('gap')) || 16;

    // tile size to keep tiles square: (gridWidth - (cols-1)*gap) / cols
    const tileSize = Math.floor((gridWidth - (cols - 1) * gapPx) / cols);

    // set CSS variables
    document.documentElement.style.setProperty('--grid-width', gridWidth + 'px');
    document.documentElement.style.setProperty('--tile-size', tileSize + 'px');

    // also set primary-height-ratio if you want different height ratio for THE BOX (still 0.5)
    // document.documentElement.style.setProperty('--primary-height-ratio', '0.5');
  }

  function scheduleUpdate() {
    if (raf) cancelAnimationFrame(raf);
    raf = requestAnimationFrame(() => { update(); raf = null; });
  }

  window.addEventListener('resize', scheduleUpdate, { passive: true });
  window.addEventListener('orientationchange', () => setTimeout(scheduleUpdate, 120), { passive: true });
  window.addEventListener('load', () => { scheduleUpdate(); setTimeout(scheduleUpdate, 200); });

  scheduleUpdate();
})();
</script>
</body>
</html>
