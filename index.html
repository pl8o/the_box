<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>HAND MADE WEBSITES â€” Matrix (THE BOX half-size on large screens)</title>

<style>
  :root{
    --gap: clamp(8px, 1.6vmin, 20px);
    --border: clamp(3px, 0.6vmin, 10px);
    --wrap-padding: 12px;
    --txt-dark: #000;
    --txt-light: #fff;

    /* runtime-updated by JS to match the primary square / tile sizing */
    --square-size: 600px;
    --tile-size: 120px;
  }

  /* Page */
  html,body{
    height:100%;
    margin:0;
    background:#000;
    font-family: Arial, Helvetica, sans-serif;
    color:var(--txt-light);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  /* Centering container */
  .wrap{
    width:100%;
    padding: var(--wrap-padding);
    box-sizing:border-box;
    display:flex;
    justify-content:center;
  }

  .content {
    width: calc(100vw - (var(--wrap-padding) * 2));
    box-sizing: border-box;
    max-width: none;
  }

  /* THE BOX: full-width square on small screens; half-width square on large screens */
  .primary {
    width: 100%;
    aspect-ratio: 1 / 1;             /* perfect square */
    display:flex;
    align-items:center;
    justify-content:center;
    background: orange;
    color:var(--txt-dark);
    border: calc(var(--border) / 1.2) solid #000;
    border-radius: 6px;
    box-sizing: border-box;
    overflow: hidden;
    padding: 8px;
    margin-bottom: var(--gap);
    background-clip: padding-box;
  }

  /* On large screens make THE BOX half the container width and center it */
  @media (min-width: 1100px) {
    .primary {
      width: 50%;
      margin-left: auto;
      margin-right: auto;
      margin-bottom: var(--gap);
    }
    /* make small-grid match the primary width on large screens so alignment looks cohesive */
    .small-grid {
      width: 50%;
      margin-left: auto;
      margin-right: auto;
    }
  }

  .primary.colorme_main {
    animation: bgcolorchange 10s linear infinite;
  }
  @keyframes bgcolorchange {
    0% { background: gold; } 10% { background: orange; } 20% { background:#ff6600; }
    30% { background: OrangeRed; } 40% { background: magenta; } 50% { background: HotPink; }
    60% { background: violet; } 70% { background: #ffcc00; } 80% { background: gold; } 100% { background: gold; }
  }

  .primary .title{
    margin:0;
    font-size: clamp(18px, calc(var(--square-size, 100vmin) * 0.06), 140px);
    line-height:1;
    text-align:center;
    word-break:break-word;
  }

  /* small grid: by default 4 columns (desktop/tablet), switches to 2 columns at narrow widths */
  .small-grid {
    width:100%;
    display:grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--gap);
    box-sizing:border-box;
    grid-auto-rows: var(--tile-size); /* JS will set --tile-size to make squares */
  }

  /* tiles (squares because grid-auto-rows is set equal to column width) */
  .card {
    display:flex;
    align-items:center;
    justify-content:center;
    text-decoration:none;
    color:var(--txt-dark);
    border: calc(var(--border)/1.2) solid #000;
    box-sizing:border-box;
    border-radius:6px;
    overflow:hidden;
    padding:6px;
    background-clip: padding-box;
    user-select:none;
  }

  .card .inner { width:100%; height:100%; display:flex; align-items:center; justify-content:center; text-align:center; padding:4px; }
  .promo { margin:0; font-weight:600; font-size: clamp(10px, calc(var(--tile-size) * 0.12), 22px); }

  /* colors */
  .c-green{ background: green; }
  .c-slate{ background: SlateBlue; color:var(--txt-light); }
  .c-red{ background: OrangeRed; color:var(--txt-light); }
  .c-aqua{ background: aqua; color:var(--txt-dark); }
  .c-orange{ background: orange; color:var(--txt-dark); }
  .c-blv{ background: BlueViolet; color:var(--txt-light); }
  .c-magenta{ background: magenta; color:var(--txt-dark); }
  .c-ff{ background:#ffcc00; color:var(--txt-dark); }
  .c-blue{ background: blue; color:var(--txt-light); }
  .c-violet{ background: violet; color:var(--txt-dark); }
  .c-lime{ background: lime; color:var(--txt-dark); }
  .c-gold{ background: gold; color:var(--txt-dark); }

  .card:hover, .card:focus { transform: translateY(-6px); box-shadow: 0 18px 36px rgba(0,0,0,0.45); z-index:2; transition:.15s; }
  .card:focus-visible { outline: 3px solid rgba(255,255,255,0.85); outline-offset:3px; }

  /* MOBILE: show 2 boxes per row (small-grid) to reduce empty space */
  @media (max-width: 700px) {
    .small-grid {
      grid-template-columns: repeat(2, 1fr);
      grid-auto-rows: var(--tile-size);
    }
    /* ensure THE BOX remains full-width on phones */
    .primary { width:100%; }
    .primary .title { font-size: clamp(16px, calc(var(--square-size, 100vw) * 0.06), 48px); }
    .promo { font-size: clamp(12px, calc(var(--square-size, 100vw) * 0.03), 18px); }
  }

  /* ensure small heights clamp on very short viewports */
  @media (max-height:420px) {
    .primary { width: calc(100vw - 48px); }
  }

  .homelink { text-align:center; margin:18px 0; }
  .homelink a { color:inherit; text-decoration:none; background:rgba(255,255,255,0.06); padding:8px 12px; border-radius:6px; display:inline-block; }
</style>
</head>
<body>
  <div class="wrap">
    <div class="content">
      <!-- THE BOX -->
      <a class="primary colorme_main" href="matrix_1.html" target="_blank" rel="noopener" aria-label="THE BOX">
        <div class="inner"><h1 class="title">THE<br>BOX</h1></div>
      </a>

      <!-- small grid -->
      <div class="small-grid" id="smallGrid">
        <a class="card c-green"  href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 1<br>GREEN</h2></div></a>
        <a class="card c-slate"  href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 2<br>SLATEBLUE</h2></div></a>

        <a class="card c-red"    href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 3<br>ORANGERED</h2></div></a>
        <a class="card c-aqua"   href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 4<br>AQUA</h2></div></a>

        <a class="card c-orange" href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 5<br>ORANGE</h2></div></a>
        <a class="card c-blv"    href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 6<br>BLUEVIOLET</h2></div></a>

        <a class="card c-magenta" href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 7<br>MAGENTA</h2></div></a>
        <a class="card c-ff"     href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 8<br>#FFCC00</h2></div></a>

        <a class="card c-blue"   href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 9<br>BLUE</h2></div></a>
        <a class="card c-violet" href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 10<br>VIOLET</h2></div></a>

        <a class="card c-lime"   href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 11<br>LIME</h2></div></a>
        <a class="card c-gold"   href="matrix_1.html" rel="noopener"><div class="inner"><h2 class="promo">BOX 12<br>GOLD</h2></div></a>
      </div>
    </div>
  </div>

  <div class="homelink"><a href="1_template_gallery.html" target="_blank" rel="noopener">BACK HOME</a></div>

<script>
/*
  Measure the primary square width and the small-grid width and set CSS variables:
  - --square-size : pixel width of THE BOX (used to scale its title)
  - --tile-size : pixel size for each small-grid tile (makes tiles square).
  This keeps THE BOX and the tiles expanding proportionally; on large screens THE BOX
  is half-width (CSS media query) and tiles are calculated from the smallGrid width.
*/
(function () {
  const primary = document.querySelector('.primary');
  const grid = document.getElementById('smallGrid');
  if (!primary || !grid) return;

  let rafId = null;
  function updateSizes() {
    // primary width (actual rendered)
    const primaryRect = primary.getBoundingClientRect();
    const primaryW = Math.max(Math.round(primaryRect.width), 100);

    // expose primary width for CSS scaling
    document.documentElement.style.setProperty('--square-size', primaryW + 'px');

    // decide columns (2 on mobile, 4 on wide)
    const cols = window.matchMedia('(max-width:700px)').matches ? 2 : 4;

    // compute gap px
    const computedGridStyle = getComputedStyle(grid);
    const gapPx = parseFloat(computedGridStyle.getPropertyValue('gap')) || 16;

    // grid width: if small-grid has its own width (on large screens it's 50%), read it;
    // otherwise use full content width.
    const gridRect = grid.getBoundingClientRect();
    const gridW = Math.max(Math.round(gridRect.width), 120);

    // tile size: (gridW - (cols-1)*gap) / cols
    const tileSize = Math.floor((gridW - (cols - 1) * gapPx) / cols);

    grid.style.setProperty('--tile-size', tileSize + 'px');
  }

  function onResize() {
    if (rafId) cancelAnimationFrame(rafId);
    rafId = requestAnimationFrame(() => { updateSizes(); rafId = null; });
  }

  window.addEventListener('resize', onResize, { passive: true });
  window.addEventListener('orientationchange', () => setTimeout(onResize, 120), { passive: true });
  window.addEventListener('load', () => { onResize(); setTimeout(onResize, 200); });

  onResize();
})();
</script>
</body>
</html>
